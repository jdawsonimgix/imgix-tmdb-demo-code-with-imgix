{"ast":null,"code":"import md5 from 'md5';\nimport { Base64 } from 'js-base64';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n} // package version used in the ix-lib parameter\n\n\nvar VERSION = '3.4.0'; // regex pattern used to determine if a domain is valid\n\nvar DOMAIN_REGEX = /^(?:[a-z\\d\\-_]{1,62}\\.){0,125}(?:[a-z\\d](?:\\-(?=\\-*[a-z\\d])|[a-z]|\\d){0,62}\\.)[a-z\\d]{1,63}$/i; // minimum generated srcset width\n\nvar MIN_SRCSET_WIDTH = 100; // maximum generated srcset width\n\nvar MAX_SRCSET_WIDTH = 8192; // default tolerable percent difference between srcset pair widths\n\nvar DEFAULT_SRCSET_WIDTH_TOLERANCE = 0.08; // default quality parameter values mapped by each dpr srcset entry\n\nvar DPR_QUALITIES = {\n  1: 75,\n  2: 50,\n  3: 35,\n  4: 23,\n  5: 20\n};\nvar DEFAULT_DPR = [1, 2, 3, 4, 5];\nvar DEFAULT_OPTIONS = {\n  domain: null,\n  useHTTPS: true,\n  includeLibraryParam: true,\n  urlPrefix: 'https://',\n  secureURLToken: null\n};\n\nfunction validateAndDestructureOptions(options) {\n  var widthTolerance;\n\n  if (options.widthTolerance !== undefined) {\n    validateWidthTolerance(options.widthTolerance);\n    widthTolerance = options.widthTolerance;\n  } else {\n    widthTolerance = DEFAULT_SRCSET_WIDTH_TOLERANCE;\n  }\n\n  var minWidth = options.minWidth === undefined ? MIN_SRCSET_WIDTH : options.minWidth;\n  var maxWidth = options.maxWidth === undefined ? MAX_SRCSET_WIDTH : options.maxWidth; // Validate the range unless we're using defaults for both\n\n  if (minWidth != MIN_SRCSET_WIDTH || maxWidth != MAX_SRCSET_WIDTH) {\n    validateRange(minWidth, maxWidth);\n  }\n\n  return [widthTolerance, minWidth, maxWidth];\n}\n\nfunction validateRange(min, max) {\n  if (!(Number.isInteger(min) && Number.isInteger(max)) || min <= 0 || max <= 0 || min > max) {\n    throw new Error(\"The min and max srcset widths can only be passed positive Number values, and min must be less than max. Found min: \".concat(min, \" and max: \").concat(max, \".\"));\n  }\n}\n\nfunction validateWidthTolerance(widthTolerance) {\n  if (typeof widthTolerance != 'number' || widthTolerance < 0.01) {\n    throw new Error('The srcset widthTolerance must be a number greater than or equal to 0.01');\n  }\n}\n\nfunction validateWidths(customWidths) {\n  if (!Array.isArray(customWidths) || !customWidths.length) {\n    throw new Error('The widths argument can only be passed a valid non-empty array of integers');\n  } else {\n    var allPositiveIntegers = customWidths.every(function (width) {\n      return Number.isInteger(width) && width > 0;\n    });\n\n    if (!allPositiveIntegers) {\n      throw new Error('A custom widths argument can only contain positive integer values');\n    }\n  }\n}\n\nfunction validateVariableQuality(disableVariableQuality) {\n  if (typeof disableVariableQuality != 'boolean') {\n    throw new Error('The disableVariableQuality argument can only be passed a Boolean value');\n  }\n}\n\nfunction validateDevicePixelRatios(devicePixelRatios) {\n  if (!Array.isArray(devicePixelRatios) || !devicePixelRatios.length) {\n    throw new Error('The devicePixelRatios argument can only be passed a valid non-empty array of integers');\n  } else {\n    var allValidDPR = devicePixelRatios.every(function (dpr) {\n      return typeof dpr === 'number' && dpr >= 1 && dpr <= 5;\n    });\n\n    if (!allValidDPR) {\n      throw new Error('The devicePixelRatios argument can only contain positive integer values between 1 and 5');\n    }\n  }\n}\n\nfunction validateVariableQualities(variableQualities) {\n  if (_typeof(variableQualities) !== 'object') {\n    throw new Error('The variableQualities argument can only be an object');\n  }\n}\n\nvar ImgixClient = /*#__PURE__*/function () {\n  function ImgixClient() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ImgixClient);\n\n    this.settings = _objectSpread2(_objectSpread2({}, DEFAULT_OPTIONS), opts); // a cache to store memoized srcset width-pairs\n\n    this.targetWidthsCache = {};\n\n    if (typeof this.settings.domain != 'string') {\n      throw new Error('ImgixClient must be passed a valid string domain');\n    }\n\n    if (DOMAIN_REGEX.exec(this.settings.domain) == null) {\n      throw new Error('Domain must be passed in as fully-qualified ' + 'domain name and should not include a protocol or any path ' + 'element, i.e. \"example.imgix.net\".');\n    }\n\n    if (this.settings.includeLibraryParam) {\n      this.settings.libraryParam = 'js-' + ImgixClient.version();\n    }\n\n    this.settings.urlPrefix = this.settings.useHTTPS ? 'https://' : 'http://';\n  }\n\n  _createClass(ImgixClient, [{\n    key: \"buildURL\",\n    value: function buildURL() {\n      var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var sanitizedPath = this._sanitizePath(path);\n\n      var finalParams = this._buildParams(params);\n\n      if (!!this.settings.secureURLToken) {\n        finalParams = this._signParams(sanitizedPath, finalParams);\n      }\n\n      return this.settings.urlPrefix + this.settings.domain + sanitizedPath + finalParams;\n    }\n  }, {\n    key: \"_buildParams\",\n    value: function _buildParams() {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var queryParams = [].concat(_toConsumableArray(this.settings.libraryParam ? [\"ixlib=\".concat(this.settings.libraryParam)] : []), _toConsumableArray(Object.entries(params).reduce(function (prev, _ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            key = _ref2[0],\n            value = _ref2[1];\n\n        if (value == null) {\n          return prev;\n        }\n\n        var encodedKey = encodeURIComponent(key);\n        var encodedValue = key.substr(-2) === '64' ? Base64.encodeURI(value) : encodeURIComponent(value);\n        prev.push(\"\".concat(encodedKey, \"=\").concat(encodedValue));\n        return prev;\n      }, [])));\n      return \"\".concat(queryParams.length > 0 ? '?' : '').concat(queryParams.join('&'));\n    }\n  }, {\n    key: \"_signParams\",\n    value: function _signParams(path, queryParams) {\n      var signatureBase = this.settings.secureURLToken + path + queryParams;\n      var signature = md5(signatureBase);\n      return queryParams.length > 0 ? queryParams + '&s=' + signature : '?s=' + signature;\n    }\n  }, {\n    key: \"_sanitizePath\",\n    value: function _sanitizePath(path) {\n      // Strip leading slash first (we'll re-add after encoding)\n      var _path = path.replace(/^\\//, '');\n\n      if (/^https?:\\/\\//.test(_path)) {\n        // Use de/encodeURIComponent to ensure *all* characters are handled,\n        // since it's being used as a path\n        _path = encodeURIComponent(_path);\n      } else {\n        // Use de/encodeURI if we think the path is just a path,\n        // so it leaves legal characters like '/' and '@' alone\n        _path = encodeURI(_path).replace(/[#?:+]/g, encodeURIComponent);\n      }\n\n      return '/' + _path;\n    }\n  }, {\n    key: \"buildSrcSet\",\n    value: function buildSrcSet(path) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var w = params.w,\n          h = params.h;\n\n      if (w || h) {\n        return this._buildDPRSrcSet(path, params, options);\n      } else {\n        return this._buildSrcSetPairs(path, params, options);\n      }\n    } // returns an array of width values used during srcset generation\n\n  }, {\n    key: \"_buildSrcSetPairs\",\n    value: function _buildSrcSetPairs(path, params, options) {\n      var _this = this;\n\n      var _validateAndDestructu = validateAndDestructureOptions(options),\n          _validateAndDestructu2 = _slicedToArray(_validateAndDestructu, 3),\n          widthTolerance = _validateAndDestructu2[0],\n          minWidth = _validateAndDestructu2[1],\n          maxWidth = _validateAndDestructu2[2];\n\n      var targetWidthValues;\n\n      if (options.widths) {\n        validateWidths(options.widths);\n        targetWidthValues = _toConsumableArray(options.widths);\n      } else {\n        targetWidthValues = ImgixClient.targetWidths(minWidth, maxWidth, widthTolerance, this.targetWidthsCache);\n      }\n\n      var srcset = targetWidthValues.map(function (w) {\n        return \"\".concat(_this.buildURL(path, _objectSpread2(_objectSpread2({}, params), {}, {\n          w: w\n        })), \" \").concat(w, \"w\");\n      });\n      return srcset.join(',\\n');\n    }\n  }, {\n    key: \"_buildDPRSrcSet\",\n    value: function _buildDPRSrcSet(path, params, options) {\n      var _this2 = this;\n\n      if (options.devicePixelRatios) {\n        validateDevicePixelRatios(options.devicePixelRatios);\n      }\n\n      var targetRatios = options.devicePixelRatios || DEFAULT_DPR;\n      var disableVariableQuality = options.disableVariableQuality || false;\n\n      if (!disableVariableQuality) {\n        validateVariableQuality(disableVariableQuality);\n      }\n\n      if (options.variableQualities) {\n        validateVariableQualities(options.variableQualities);\n      }\n\n      var qualities = _objectSpread2(_objectSpread2({}, DPR_QUALITIES), options.variableQualities);\n\n      var withQuality = function withQuality(path, params, dpr) {\n        return \"\".concat(_this2.buildURL(path, _objectSpread2(_objectSpread2({}, params), {}, {\n          dpr: dpr,\n          q: params.q || qualities[dpr] || qualities[Math.floor(dpr)]\n        })), \" \").concat(dpr, \"x\");\n      };\n\n      var srcset = disableVariableQuality ? targetRatios.map(function (dpr) {\n        return \"\".concat(_this2.buildURL(path, _objectSpread2(_objectSpread2({}, params), {}, {\n          dpr: dpr\n        })), \" \").concat(dpr, \"x\");\n      }) : targetRatios.map(function (dpr) {\n        return withQuality(path, params, dpr);\n      });\n      return srcset.join(',\\n');\n    }\n  }], [{\n    key: \"version\",\n    value: function version() {\n      return VERSION;\n    }\n  }, {\n    key: \"targetWidths\",\n    value: function targetWidths() {\n      var minWidth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 100;\n      var maxWidth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8192;\n      var widthTolerance = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.08;\n      var cache = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var minW = Math.floor(minWidth);\n      var maxW = Math.floor(maxWidth);\n      validateRange(minWidth, maxWidth);\n      validateWidthTolerance(widthTolerance);\n      var cacheKey = widthTolerance + '/' + minW + '/' + maxW; // First, check the cache.\n\n      if (cacheKey in cache) {\n        return cache[cacheKey];\n      }\n\n      if (minW === maxW) {\n        return [minW];\n      }\n\n      var resolutions = [];\n      var currentWidth = minW;\n\n      while (currentWidth < maxW) {\n        // While the currentWidth is less than the maxW, push the rounded\n        // width onto the list of resolutions.\n        resolutions.push(Math.round(currentWidth));\n        currentWidth *= 1 + widthTolerance * 2;\n      } // At this point, the last width in resolutions is less than the\n      // currentWidth that caused the loop to terminate. This terminating\n      // currentWidth is greater than or equal to the maxW. We want to\n      // to stop at maxW, so we make sure our maxW is larger than the last\n      // width in resolutions before pushing it (if it's equal we're done).\n\n\n      if (resolutions[resolutions.length - 1] < maxW) {\n        resolutions.push(maxW);\n      }\n\n      cache[cacheKey] = resolutions;\n      return resolutions;\n    }\n  }]);\n\n  return ImgixClient;\n}();\n\nexport { ImgixClient as default };","map":{"version":3,"sources":["/Users/Jamie/Desktop/testing here/imgix-tmdb-demo-code/node_modules/@imgix/js-core/dist/index.esm.js"],"names":["md5","Base64","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","value","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","from","_i","_arr","_n","_d","_s","_e","call","next","done","err","o","minLen","n","toString","slice","name","test","len","arr2","VERSION","DOMAIN_REGEX","MIN_SRCSET_WIDTH","MAX_SRCSET_WIDTH","DEFAULT_SRCSET_WIDTH_TOLERANCE","DPR_QUALITIES","DEFAULT_DPR","DEFAULT_OPTIONS","domain","useHTTPS","includeLibraryParam","urlPrefix","secureURLToken","validateAndDestructureOptions","options","widthTolerance","undefined","validateWidthTolerance","minWidth","maxWidth","validateRange","min","max","Number","isInteger","Error","concat","validateWidths","customWidths","allPositiveIntegers","every","width","validateVariableQuality","disableVariableQuality","validateDevicePixelRatios","devicePixelRatios","allValidDPR","dpr","validateVariableQualities","variableQualities","ImgixClient","opts","settings","targetWidthsCache","exec","libraryParam","version","buildURL","path","params","sanitizedPath","_sanitizePath","finalParams","_buildParams","_signParams","queryParams","entries","reduce","prev","_ref","_ref2","encodedKey","encodeURIComponent","encodedValue","substr","encodeURI","join","signatureBase","signature","_path","replace","buildSrcSet","w","h","_buildDPRSrcSet","_buildSrcSetPairs","_this","_validateAndDestructu","_validateAndDestructu2","targetWidthValues","widths","targetWidths","srcset","map","_this2","targetRatios","qualities","withQuality","q","Math","floor","cache","minW","maxW","cacheKey","resolutions","currentWidth","round","default"],"mappings":"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","sourcesContent":["import md5 from 'md5';\nimport { Base64 } from 'js-base64';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\n// package version used in the ix-lib parameter\nvar VERSION = '3.4.0'; // regex pattern used to determine if a domain is valid\n\nvar DOMAIN_REGEX = /^(?:[a-z\\d\\-_]{1,62}\\.){0,125}(?:[a-z\\d](?:\\-(?=\\-*[a-z\\d])|[a-z]|\\d){0,62}\\.)[a-z\\d]{1,63}$/i; // minimum generated srcset width\n\nvar MIN_SRCSET_WIDTH = 100; // maximum generated srcset width\n\nvar MAX_SRCSET_WIDTH = 8192; // default tolerable percent difference between srcset pair widths\n\nvar DEFAULT_SRCSET_WIDTH_TOLERANCE = 0.08; // default quality parameter values mapped by each dpr srcset entry\n\nvar DPR_QUALITIES = {\n  1: 75,\n  2: 50,\n  3: 35,\n  4: 23,\n  5: 20\n};\nvar DEFAULT_DPR = [1, 2, 3, 4, 5];\nvar DEFAULT_OPTIONS = {\n  domain: null,\n  useHTTPS: true,\n  includeLibraryParam: true,\n  urlPrefix: 'https://',\n  secureURLToken: null\n};\n\nfunction validateAndDestructureOptions(options) {\n  var widthTolerance;\n\n  if (options.widthTolerance !== undefined) {\n    validateWidthTolerance(options.widthTolerance);\n    widthTolerance = options.widthTolerance;\n  } else {\n    widthTolerance = DEFAULT_SRCSET_WIDTH_TOLERANCE;\n  }\n\n  var minWidth = options.minWidth === undefined ? MIN_SRCSET_WIDTH : options.minWidth;\n  var maxWidth = options.maxWidth === undefined ? MAX_SRCSET_WIDTH : options.maxWidth; // Validate the range unless we're using defaults for both\n\n  if (minWidth != MIN_SRCSET_WIDTH || maxWidth != MAX_SRCSET_WIDTH) {\n    validateRange(minWidth, maxWidth);\n  }\n\n  return [widthTolerance, minWidth, maxWidth];\n}\nfunction validateRange(min, max) {\n  if (!(Number.isInteger(min) && Number.isInteger(max)) || min <= 0 || max <= 0 || min > max) {\n    throw new Error(\"The min and max srcset widths can only be passed positive Number values, and min must be less than max. Found min: \".concat(min, \" and max: \").concat(max, \".\"));\n  }\n}\nfunction validateWidthTolerance(widthTolerance) {\n  if (typeof widthTolerance != 'number' || widthTolerance < 0.01) {\n    throw new Error('The srcset widthTolerance must be a number greater than or equal to 0.01');\n  }\n}\nfunction validateWidths(customWidths) {\n  if (!Array.isArray(customWidths) || !customWidths.length) {\n    throw new Error('The widths argument can only be passed a valid non-empty array of integers');\n  } else {\n    var allPositiveIntegers = customWidths.every(function (width) {\n      return Number.isInteger(width) && width > 0;\n    });\n\n    if (!allPositiveIntegers) {\n      throw new Error('A custom widths argument can only contain positive integer values');\n    }\n  }\n}\nfunction validateVariableQuality(disableVariableQuality) {\n  if (typeof disableVariableQuality != 'boolean') {\n    throw new Error('The disableVariableQuality argument can only be passed a Boolean value');\n  }\n}\nfunction validateDevicePixelRatios(devicePixelRatios) {\n  if (!Array.isArray(devicePixelRatios) || !devicePixelRatios.length) {\n    throw new Error('The devicePixelRatios argument can only be passed a valid non-empty array of integers');\n  } else {\n    var allValidDPR = devicePixelRatios.every(function (dpr) {\n      return typeof dpr === 'number' && dpr >= 1 && dpr <= 5;\n    });\n\n    if (!allValidDPR) {\n      throw new Error('The devicePixelRatios argument can only contain positive integer values between 1 and 5');\n    }\n  }\n}\nfunction validateVariableQualities(variableQualities) {\n  if (_typeof(variableQualities) !== 'object') {\n    throw new Error('The variableQualities argument can only be an object');\n  }\n}\n\nvar ImgixClient = /*#__PURE__*/function () {\n  function ImgixClient() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ImgixClient);\n\n    this.settings = _objectSpread2(_objectSpread2({}, DEFAULT_OPTIONS), opts); // a cache to store memoized srcset width-pairs\n\n    this.targetWidthsCache = {};\n\n    if (typeof this.settings.domain != 'string') {\n      throw new Error('ImgixClient must be passed a valid string domain');\n    }\n\n    if (DOMAIN_REGEX.exec(this.settings.domain) == null) {\n      throw new Error('Domain must be passed in as fully-qualified ' + 'domain name and should not include a protocol or any path ' + 'element, i.e. \"example.imgix.net\".');\n    }\n\n    if (this.settings.includeLibraryParam) {\n      this.settings.libraryParam = 'js-' + ImgixClient.version();\n    }\n\n    this.settings.urlPrefix = this.settings.useHTTPS ? 'https://' : 'http://';\n  }\n\n  _createClass(ImgixClient, [{\n    key: \"buildURL\",\n    value: function buildURL() {\n      var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var sanitizedPath = this._sanitizePath(path);\n\n      var finalParams = this._buildParams(params);\n\n      if (!!this.settings.secureURLToken) {\n        finalParams = this._signParams(sanitizedPath, finalParams);\n      }\n\n      return this.settings.urlPrefix + this.settings.domain + sanitizedPath + finalParams;\n    }\n  }, {\n    key: \"_buildParams\",\n    value: function _buildParams() {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var queryParams = [].concat(_toConsumableArray(this.settings.libraryParam ? [\"ixlib=\".concat(this.settings.libraryParam)] : []), _toConsumableArray(Object.entries(params).reduce(function (prev, _ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            key = _ref2[0],\n            value = _ref2[1];\n\n        if (value == null) {\n          return prev;\n        }\n\n        var encodedKey = encodeURIComponent(key);\n        var encodedValue = key.substr(-2) === '64' ? Base64.encodeURI(value) : encodeURIComponent(value);\n        prev.push(\"\".concat(encodedKey, \"=\").concat(encodedValue));\n        return prev;\n      }, [])));\n      return \"\".concat(queryParams.length > 0 ? '?' : '').concat(queryParams.join('&'));\n    }\n  }, {\n    key: \"_signParams\",\n    value: function _signParams(path, queryParams) {\n      var signatureBase = this.settings.secureURLToken + path + queryParams;\n      var signature = md5(signatureBase);\n      return queryParams.length > 0 ? queryParams + '&s=' + signature : '?s=' + signature;\n    }\n  }, {\n    key: \"_sanitizePath\",\n    value: function _sanitizePath(path) {\n      // Strip leading slash first (we'll re-add after encoding)\n      var _path = path.replace(/^\\//, '');\n\n      if (/^https?:\\/\\//.test(_path)) {\n        // Use de/encodeURIComponent to ensure *all* characters are handled,\n        // since it's being used as a path\n        _path = encodeURIComponent(_path);\n      } else {\n        // Use de/encodeURI if we think the path is just a path,\n        // so it leaves legal characters like '/' and '@' alone\n        _path = encodeURI(_path).replace(/[#?:+]/g, encodeURIComponent);\n      }\n\n      return '/' + _path;\n    }\n  }, {\n    key: \"buildSrcSet\",\n    value: function buildSrcSet(path) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var w = params.w,\n          h = params.h;\n\n      if (w || h) {\n        return this._buildDPRSrcSet(path, params, options);\n      } else {\n        return this._buildSrcSetPairs(path, params, options);\n      }\n    } // returns an array of width values used during srcset generation\n\n  }, {\n    key: \"_buildSrcSetPairs\",\n    value: function _buildSrcSetPairs(path, params, options) {\n      var _this = this;\n\n      var _validateAndDestructu = validateAndDestructureOptions(options),\n          _validateAndDestructu2 = _slicedToArray(_validateAndDestructu, 3),\n          widthTolerance = _validateAndDestructu2[0],\n          minWidth = _validateAndDestructu2[1],\n          maxWidth = _validateAndDestructu2[2];\n\n      var targetWidthValues;\n\n      if (options.widths) {\n        validateWidths(options.widths);\n        targetWidthValues = _toConsumableArray(options.widths);\n      } else {\n        targetWidthValues = ImgixClient.targetWidths(minWidth, maxWidth, widthTolerance, this.targetWidthsCache);\n      }\n\n      var srcset = targetWidthValues.map(function (w) {\n        return \"\".concat(_this.buildURL(path, _objectSpread2(_objectSpread2({}, params), {}, {\n          w: w\n        })), \" \").concat(w, \"w\");\n      });\n      return srcset.join(',\\n');\n    }\n  }, {\n    key: \"_buildDPRSrcSet\",\n    value: function _buildDPRSrcSet(path, params, options) {\n      var _this2 = this;\n\n      if (options.devicePixelRatios) {\n        validateDevicePixelRatios(options.devicePixelRatios);\n      }\n\n      var targetRatios = options.devicePixelRatios || DEFAULT_DPR;\n      var disableVariableQuality = options.disableVariableQuality || false;\n\n      if (!disableVariableQuality) {\n        validateVariableQuality(disableVariableQuality);\n      }\n\n      if (options.variableQualities) {\n        validateVariableQualities(options.variableQualities);\n      }\n\n      var qualities = _objectSpread2(_objectSpread2({}, DPR_QUALITIES), options.variableQualities);\n\n      var withQuality = function withQuality(path, params, dpr) {\n        return \"\".concat(_this2.buildURL(path, _objectSpread2(_objectSpread2({}, params), {}, {\n          dpr: dpr,\n          q: params.q || qualities[dpr] || qualities[Math.floor(dpr)]\n        })), \" \").concat(dpr, \"x\");\n      };\n\n      var srcset = disableVariableQuality ? targetRatios.map(function (dpr) {\n        return \"\".concat(_this2.buildURL(path, _objectSpread2(_objectSpread2({}, params), {}, {\n          dpr: dpr\n        })), \" \").concat(dpr, \"x\");\n      }) : targetRatios.map(function (dpr) {\n        return withQuality(path, params, dpr);\n      });\n      return srcset.join(',\\n');\n    }\n  }], [{\n    key: \"version\",\n    value: function version() {\n      return VERSION;\n    }\n  }, {\n    key: \"targetWidths\",\n    value: function targetWidths() {\n      var minWidth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 100;\n      var maxWidth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8192;\n      var widthTolerance = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.08;\n      var cache = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var minW = Math.floor(minWidth);\n      var maxW = Math.floor(maxWidth);\n      validateRange(minWidth, maxWidth);\n      validateWidthTolerance(widthTolerance);\n      var cacheKey = widthTolerance + '/' + minW + '/' + maxW; // First, check the cache.\n\n      if (cacheKey in cache) {\n        return cache[cacheKey];\n      }\n\n      if (minW === maxW) {\n        return [minW];\n      }\n\n      var resolutions = [];\n      var currentWidth = minW;\n\n      while (currentWidth < maxW) {\n        // While the currentWidth is less than the maxW, push the rounded\n        // width onto the list of resolutions.\n        resolutions.push(Math.round(currentWidth));\n        currentWidth *= 1 + widthTolerance * 2;\n      } // At this point, the last width in resolutions is less than the\n      // currentWidth that caused the loop to terminate. This terminating\n      // currentWidth is greater than or equal to the maxW. We want to\n      // to stop at maxW, so we make sure our maxW is larger than the last\n      // width in resolutions before pushing it (if it's equal we're done).\n\n\n      if (resolutions[resolutions.length - 1] < maxW) {\n        resolutions.push(maxW);\n      }\n\n      cache[cacheKey] = resolutions;\n      return resolutions;\n    }\n  }]);\n\n  return ImgixClient;\n}();\n\nexport { ImgixClient as default };\n"]},"metadata":{},"sourceType":"module"}